<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Near-Infrared for Caries Detection — Living Systematic Review</title>
    <meta name="description" content="Living systematic review of near-infrared imaging for caries detection." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Aptos:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #e8f4f8;
            --card: #ffffff;
            --accent: #1a5276;
            /* dark blue */
            --accent-light: #5dade2;
            /* light blue */
            --muted: #555;
            --glass: rgba(255, 255, 255, 0.7);
            --radius: 12px;
            --max: 1200px;
            font-family: 'Aptos', -apple-system, system-ui, sans-serif;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            background: linear-gradient(180deg, var(--bg), #d0e8f2);
            color: #1a1a1a;
            line-height: 1.6
        }

        .wrap {
            max-width: var(--max);
            margin: 0 auto;
            padding: 24px
        }

        header {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: white;
            padding: 40px 24px;
            text-align: center;
            border-radius: 0 0 12px 12px
        }

        h1.page-title {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 400;
            letter-spacing: 0.5px
        }

        p.abstract {
            margin: 12px 0 0;
            font-size: 1rem;
            font-weight: 300;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.7;
            color: white
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 16px;
            flex-wrap: wrap
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 400;
            border-bottom: 2px solid transparent;
            transition: all 0.2s
        }

        nav a:hover {
            border-bottom-color: white
        }

        main {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-top: 24px
        }

        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: 0 4px 12px rgba(26, 82, 118, 0.1)
        }

        h2 {
            color: var(--accent);
            font-size: 1.6rem;
            font-weight: 400;
            margin: 0 0 16px 0;
            border-bottom: 3px solid var(--accent-light);
            padding-bottom: 8px
        }

        h3 {
            color: var(--accent);
            font-size: 1.2rem;
            font-weight: 400;
            margin: 16px 0 8px 0
        }

        p {
            color: var(--muted);
            font-weight: 300;
            margin: 8px 0
        }

        .nir-definition {
            background: linear-gradient(135deg, rgba(93, 173, 226, 0.08), rgba(26, 82, 118, 0.04));
            padding: 20px;
            border-left: 4px solid var(--accent-light);
            border-radius: 8px;
            margin-bottom: 16px
        }

        .nir-types {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px
        }

        .nir-type {
            background: rgba(93, 173, 226, 0.05);
            padding: 16px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-light)
        }

        .nir-type h4 {
            color: var(--accent);
            margin: 0 0 8px 0;
            font-weight: 400;
            font-size: 1.05rem
        }

        .nir-type p {
            margin: 0;
            font-size: 0.95rem
        }

        @media (max-width: 700px) {
            .nir-types {
                grid-template-columns: 1fr
            }
        }

        .findings-list {
            list-style: none;
            padding: 0;
            margin: 0
        }

        .finding {
            padding: 16px;
            margin-bottom: 12px;
            background: rgba(93, 173, 226, 0.04);
            border-left: 4px solid var(--accent-light);
            border-radius: 6px
        }

        .finding-date {
            color: var(--accent);
            font-weight: 400;
            display: block;
            font-size: 0.9rem;
            margin-bottom: 4px
        }

        .finding-title {
            color: var(--accent);
            font-weight: 400;
            display: block;
            margin-bottom: 8px
        }

        .finding-body {
            color: var(--muted);
            font-size: 0.95rem;
            font-weight: 300
        }

        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
            margin-top: 16px
        }

        figure {
            margin: 0;
            text-align: center
        }

        figcaption {
            font-size: 0.85rem;
            color: var(--accent);
            margin-top: 8px;
            font-weight: 400
        }

        figure img,
        figure svg {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(26, 82, 118, 0.1);
            cursor: pointer;
            transition: transform 0.2s ease
        }

        figure img:hover,
        figure svg:hover {
            transform: scale(1.05)
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            align-items: center;
            justify-content: center
        }

        .modal.active {
            display: flex
        }

        .modal-content {
            position: relative;
            background: white;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90vh;
            overflow: auto;
            padding: 0
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.9)
        }

        .modal-image {
            display: block;
            width: 100%;
            height: auto;
            border-radius: 12px
        }

        .authors-list {
            list-style: none;
            padding: 0;
            margin: 0
        }

        .author {
            padding: 12px 0;
            border-bottom: 1px solid #eee
        }

        .author:last-child {
            border-bottom: none
        }

        .author-name {
            color: var(--accent);
            font-weight: 400;
            display: block
        }

        .author-dept {
            color: var(--muted);
            font-size: 0.9rem;
            font-weight: 300
        }

        footer {
            margin-top: 32px;
            color: var(--muted);
            font-size: 0.9rem;
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid rgba(93, 173, 226, 0.2)
        }

        .placeholder-note {
            font-size: 0.9rem;
            color: var(--accent);
            background: rgba(93, 173, 226, 0.1);
            padding: 12px;
            border-radius: 6px;
            margin-top: 12px;
            border-left: 3px solid var(--accent-light)
        }

        .btn {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 400
        }

        .btn:hover {
            background: var(--accent-light)
        }
    </style>
</head>

<body>
    <header>
        <h1 class="page-title">Near-Infrared for Caries Detection</h1>
        <p class="abstract">This website is a living systematic review bringing together the latest evidence from in
            vitro and in vivo near-infrared studies for caries detection. This website is where all the updates
            regarding the living systematic review will be made, including new studies and new meta analysis
            evaluations.</p>
        <nav>
            <a href="#about">About NIR</a>
            <a href="#findings">Summary of Findings</a>
            <a href="#authors">Authors</a>
        </nav>
    </header>

    <div class="wrap">
        <main>

            <!-- About NIR Section -->
            <section id="about" class="card">
                <h2>About Near-Infrared (NIR) Imaging</h2>
                <div class="nir-definition">
                    <p>Near-Infrared Imaging (NIR) for caries detection is a non-ionizing optical method that uses
                        near-infrared light (~780–1700 nm) to visualize early enamel demineralization, especially in
                        proximal surfaces where radiographs often fail to detect lesions. Sound enamel is highly
                        translucent to NIR, while demineralized areas scatter the light, creating higher-contrast images
                        of early lesions.</p>
                </div>

                <h3>Two Main Types of NIR Systems</h3>
                <div class="nir-types">
                    <div class="nir-type">
                        <h4>NIR Transillumination</h4>
                        <p>Light passes through the tooth and lesions appear as dark regions due to increased
                            scattering.</p>
                    </div>
                    <div class="nir-type">
                        <h4>NIR Reflectance</h4>
                        <p>Light reflects off the enamel surface and demineralized areas appear brighter because they
                            scatter more light back to the sensor.</p>
                    </div>
                </div>
            </section>

            <!-- Summary of Findings Section -->
            <section id="findings" class="card">
                <h2>Summary of Findings</h2>
                <p style="font-style: italic; color: var(--accent);">Meta-analyses conducted</p>

                <ul class="findings-list">
                    <li class="finding">
                        <span class="finding-title">Diagnostic Performance and Heterogeneity</span>
                        <span class="finding-body">
                            <p>NIR imaging shows moderate diagnostic performance for proximal caries detection. In vivo
                                studies report higher sensitivity (0.77; 95% CI: 0.58–0.89) but lower specificity (0.69;
                                95% CI: 0.36–0.90), indicating better detection of early lesions but reduced ability to
                                correctly identify sound surfaces. In vitro studies show the opposite pattern, with
                                lower sensitivity (0.46; 95% CI: 0.30–0.62) and higher specificity (0.90; 95% CI:
                                0.83–0.94). These differences reflect more false negatives in laboratory conditions and
                                more false positives in clinical environments.</p>
                            <p>Across outcomes, heterogeneity is high (I² commonly &gt;90%), indicating substantial
                                variability in methodologies, lesion characteristics, devices, and reference standards.
                                Pooled likelihood ratios demonstrate limited clinical impact (PLR = 1.35; NLR = 0.74),
                                and the overall diagnostic odds ratio is modest (DOR = 8.49; 95% CI: 3.16–22.84). The
                                SROC analysis confirms wide confidence and prediction regions, with no significant
                                differences between in vivo and in vitro settings. Overall, current evidence supports
                                NIR as a useful adjunct tool but not a standalone diagnostic method for proximal caries
                                detection.</p>
                        </span>
                    </li>
                </ul>

                <h3>Meta-analysis images</h3>
                <div id="meta-images" class="card" style="padding:12px">
                    <div id="meta-images-grid" class="images-grid" aria-live="polite">
                        <div class="muted">Looking for images in <code>meta-analyses/</code>…</div>
                    </div>


                </div>
            </section>

            <!-- Authors Section -->
            <section id="authors" class="card">
                <h2>Authors</h2>
                <ul class="authors-list">
                    <li class="author">
                        <span class="author-name">Nicole Rodrigues</span>
                        <span class="author-dept">Department of Conservative Dentistry and Prosthodontics<br>Complutense
                            University of Madrid, Spain</span>
                    </li>
                    <li class="author">
                        <span class="author-name">Monica Bonfanti-Gris</span>
                        <span class="author-dept">Department of Conservative Dentistry and Prosthodontics<br>Complutense
                            University of Madrid, Spain</span>
                    </li>
                    <li class="author">
                        <span class="author-name">Maria Paz Salido</span>
                        <span class="author-dept">Department of Conservative Dentistry and Prosthodontics<br>Complutense
                            University of Madrid, Spain</span>
                    </li>
                    <li class="author">
                        <span class="author-name">Guillermo Pradies</span>
                        <span class="author-dept">Department of Conservative Dentistry and Prosthodontics<br>Complutense
                            University of Madrid, Spain</span>
                    </li>
                </ul>
            </section>

        </main>

        <footer>
            <div>Living Systematic Review — Near-Infrared for Caries Detection</div>
            <div style="margin-top: 8px; font-size: 0.85rem;">Updates will be continuously added as new evidence
                emerges.</div>
        </footer>
    </div>

    <!-- Modal for enlarged images -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close image">&times;</button>
            <img id="modalImage" class="modal-image" src="" alt="">
        </div>
    </div>

    <script>
        // Load updates from updates.json (optional enhancement for tracking review updates)
        (async function () {
            const listEl = document.getElementById('updates-list');
            if (!listEl) return;
            try {
                const res = await fetch('updates.json');
                if (!res.ok) throw new Error('HTTP ' + res.status);
                const data = await res.json();
                data.sort((a, b) => new Date(b.date) - new Date(a.date));
                listEl.innerHTML = data.map(u => {
                    const date = escapeHtml(u.date);
                    const title = escapeHtml(u.title);
                    const body = u.body ? ' — ' + escapeHtml(u.body) : '';
                    return `<li class="update"><strong>${date}</strong> — ${title}${body}</li>`;
                }).join('');
            } catch (err) {
                console.warn('Could not load updates.json:', err);
            }

            function escapeHtml(s) {
                return String(s || '')
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;');
            }
        })();

        // Load meta-analysis images from meta-analyses/ folder.
        (async function loadMetaImages() {
            const grid = document.getElementById('meta-images-grid');
            if (!grid) return;
            grid.innerHTML = '<div class="muted">Searching for images…</div>';

            // Helper: render a single image figure
            function renderImage(src, caption) {
                const fig = document.createElement('figure');
                const img = document.createElement('img');
                img.src = src;
                img.alt = caption || '';
                img.style.cursor = 'pointer';
                // Add click handler to open modal
                img.addEventListener('click', (e) => {
                    e.preventDefault();
                    const modal = document.getElementById('imageModal');
                    const modalImg = document.getElementById('modalImage');
                    if (modal && modalImg) {
                        modalImg.src = src;
                        modalImg.alt = caption || '';
                        modal.classList.add('active');
                    }
                });
                const cap = document.createElement('figcaption');
                cap.textContent = caption || src.split('/').pop();
                fig.appendChild(img);
                fig.appendChild(cap);
                grid.appendChild(fig);
            }

            // Try to load manifest first: meta-analyses/manifest.json -> ["image1.jpg", ...]
            try {
                const m = await fetch('meta-analyses/manifest.json');
                if (m.ok) {
                    const list = await m.json();
                    grid.innerHTML = '';
                    for (const fname of list) {
                        const path = `meta-analyses/${fname}`;
                        try {
                            const r = await fetch(path);
                            if (r.ok) renderImage(path, fname);
                        } catch (e) { /* ignore individual failures */ }
                    }
                    if (!grid.children.length) grid.innerHTML = '<div class="muted">No images found in manifest.</div>';
                    return;
                }
            } catch (e) {
                // manifest not found or invalid — fall through to pattern
            }

            // If no manifest, try a pattern: image1..image7 with common extensions
            const exts = ['.jpg', '.jpeg', '.png', '.svg', '.webp'];
            const found = [];
            grid.innerHTML = '';
            for (let i = 1; i <= 7; i++) {
                let matched = false;
                for (const ext of exts) {
                    const path = `meta-analyses/image${i}${ext}`;
                    try {
                        const r = await fetch(path, { method: 'GET' });
                        if (r.ok) {
                            renderImage(path, `Image ${i}`);
                            matched = true;
                            found.push(path);
                            break;
                        }
                    } catch (e) {
                        // continue trying other extensions
                    }
                }
                // continue to next index whether matched or not
            }

            if (!found.length) {
                grid.innerHTML = '<div class="muted">No images found in <code>meta-analyses/</code>. Make sure you placed files named <code>image1.jpg</code> … <code>image7.jpg</code> (or update the <code>manifest.json</code> approach).</div>';
            }
        })();

        // Modal close handlers
        (function () {
            const modal = document.getElementById('imageModal');
            const closeBtn = document.querySelector('.modal-close');
            if (!modal || !closeBtn) return;

            closeBtn.addEventListener('click', () => {
                modal.classList.remove('active');
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });

            // Close on Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                }
            });
        })();
    </script>
</body>

</html>